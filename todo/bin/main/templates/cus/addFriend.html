<!DOCTYPE html>
<html lang="utf-8">

<head th:replace="common/head"></head>

<style>
#alert-danger {
	height: 30px;
	padding: 0.2rem;
}
</style>

<body>
	<div class="jumbotron todo_main_area">
		<div class="container text-center todo_main">
			<div class="row">
				<div class="col-md-12">
					<form method="post" action="/">

						<div class="form-group">
							<label for="nickName">Nickname</label> <input type="text"
								class="form-control" id="nickName" name="nickName">
						</div>

						<div class="alert alert-danger" id="alert-danger">없는 아이디입니다.</div>
						<button type="button" class="btn btn-danger btn-block" id="Add">친구추가</button>
					</form>
				</div>
			</div>
		</div>
	</div>


	<form method="post" action="/invite">
		<input type="hidden" name="usr" id="usr">
	</form>

	<script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>

	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		
		
				$("#alert-danger").hide();
				$("#Add").click(function() {
					var Nickname=$("#nickName").val();
					var user_list = /*[[${userlist}]]*/;
			
					var flag=false;
					for(var idx in user_list){   //
			
						if(Nickname==user_list[idx].nickName){ // getterx html에서는
								flag=true;
								break;
						}
							
					}
// 	button 은 무조건 submit이 된다. but return false 로 막을 수 있따.			
					if(!flag){
						$("#alert-danger").show();
						return false;
					}
					else{
			
						// 두번째 폼의 input에 데이터 옮겨닮기
						$("#usr").val(Nickname);
						console.log($("#usr").val())
						// 두번째 폼 submit 실행
						$(document.forms[1]).submit();
						return false;
						
					}
				
				});
			

		
		/*]]>*/
		</script>


</body>
</html>